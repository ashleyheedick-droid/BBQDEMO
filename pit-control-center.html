<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Smoke Sessions Control Center</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@400;600;700;800;900&display=swap');
    :root{
      --smoke-brown:#8B4513; --deep-hickory:#3E1A00; --fire-orange:#E25822;
      --gold:#DAA520; --cream:#FFF8DC; --dark:#1a0e0a; --dark-card:#2a1f15;
      --text:#ffffff; --text-muted:rgba(255,255,255,.75); --border:rgba(218,165,32,.2); --radius:24px;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:'Inter',-apple-system,sans-serif;color:var(--text);background:var(--dark);min-height:100vh;padding:40px 20px 80px;position:relative;overflow-x:hidden}
    body::before{content:'';position:fixed;inset:0;background:radial-gradient(circle at 20% 20%,var(--smoke-brown),transparent 40%),radial-gradient(circle at 80% 80%,var(--deep-hickory),transparent 40%);opacity:.6;pointer-events:none;z-index:0}
    .wrap{max-width:1200px;margin:0 auto;position:relative;z-index:1}
    .hero{text-align:center;margin-bottom:50px;animation:fadeInDown .6s ease-out}
    @keyframes fadeInDown{from{opacity:0;transform:translateY(-30px)}to{opacity:1;transform:translateY(0)}}
    .logo-container{display:inline-flex;align-items:center;justify-content:center;width:100px;height:100px;background:linear-gradient(135deg,var(--fire-orange),var(--smoke-brown));border-radius:20px;margin-bottom:24px;box-shadow:0 20px 60px rgba(226,88,34,.4),0 0 0 3px var(--gold),0 0 20px rgba(218,165,32,.3);font-size:50px;animation:float 3s ease-in-out infinite;position:relative}
    .logo-container::after{content:'ğŸ’¨';position:absolute;top:-10px;right:-10px;font-size:30px;animation:spin 4s linear infinite}
    @keyframes float{0%,100%{transform:translateY(0) rotate(-2deg)}50%{transform:translateY(-10px) rotate(2deg)}}
    @keyframes spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}
    h1{font-family:'Bebas Neue',sans-serif;font-size:clamp(40px,6vw,64px);font-weight:400;letter-spacing:2px;line-height:1.1;color:var(--cream);text-shadow:0 2px 10px rgba(226,88,34,.6),0 0 30px rgba(218,165,32,.3);margin-bottom:12px}
    .subtitle{font-size:16px;color:var(--text-muted);max-width:600px;margin:0 auto;line-height:1.6}
    .cajun-accent{display:inline-block;padding:6px 12px;background:linear-gradient(90deg,var(--gold),#B8860B);color:var(--dark);font-size:12px;font-weight:900;text-transform:uppercase;letter-spacing:1px;border-radius:6px;margin-top:12px;box-shadow:0 4px 12px rgba(218,165,32,.3)}
    .panel{background:linear-gradient(180deg,var(--dark-card),rgba(26,14,10,.95));border:2px solid var(--border);border-radius:var(--radius);padding:40px;margin-bottom:30px;box-shadow:0 20px 60px rgba(0,0,0,.6),inset 0 1px 0 rgba(218,165,32,.1);backdrop-filter:blur(20px);animation:fadeInUp .6s ease-out .2s both;position:relative}
    .panel::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,var(--gold),var(--fire-orange),var(--gold));border-radius:var(--radius) var(--radius) 0 0}
    @keyframes fadeInUp{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}
    .section-title{font-family:'Bebas Neue',sans-serif;font-size:20px;letter-spacing:2px;color:var(--gold);margin-bottom:20px;text-transform:uppercase}
    .form-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:24px;margin-bottom:32px}
    .field{display:flex;flex-direction:column;gap:10px}
    label{font-size:13px;font-weight:700;color:var(--gold);letter-spacing:.5px;text-transform:uppercase}
    input{width:100%;padding:14px 16px;border-radius:12px;border:2px solid var(--border);background:rgba(0,0,0,.4);color:var(--cream);font-size:14px;font-family:inherit;outline:none;transition:all .2s ease}
    input::placeholder{color:rgba(255,255,255,.3)}
    input:focus{border-color:var(--gold);background:rgba(0,0,0,.6);box-shadow:0 0 0 3px rgba(218,165,32,.2)}
    .actions{display:flex;gap:12px;flex-wrap:wrap;margin-bottom:24px}
    .btn{border:0;padding:14px 24px;border-radius:12px;cursor:pointer;color:var(--text);font-weight:800;font-size:14px;letter-spacing:.5px;font-family:inherit;display:inline-flex;align-items:center;gap:10px;transition:all .2s ease;text-transform:uppercase;position:relative;overflow:hidden}
    .btn::after{content:'';position:absolute;top:50%;left:50%;width:0;height:0;border-radius:50%;background:rgba(255,255,255,.2);transform:translate(-50%,-50%);transition:width .6s,height .6s}
    .btn:hover::after{width:300px;height:300px}
    .btn>*{position:relative;z-index:1}
    .btn.primary{background:linear-gradient(135deg,var(--fire-orange),var(--smoke-brown));box-shadow:0 10px 30px rgba(226,88,34,.4),0 0 0 2px var(--gold)}
    .btn.primary:hover{transform:translateY(-3px);box-shadow:0 15px 40px rgba(226,88,34,.6),0 0 0 2px var(--gold)}
    .btn.secondary{background:linear-gradient(135deg,var(--gold),#B8860B);color:var(--dark);box-shadow:0 10px 30px rgba(218,165,32,.3)}
    .btn.secondary:hover{transform:translateY(-3px);box-shadow:0 15px 40px rgba(218,165,32,.5)}
    .btn.ghost{background:rgba(255,255,255,.08);border:2px solid var(--border)}
    .btn.ghost:hover{background:rgba(255,255,255,.15);border-color:var(--gold);transform:translateY(-3px)}
    .status-box{display:none;padding:16px 20px;border-radius:12px;font-size:14px;font-weight:600;margin-top:4px}
    .status-box.show{display:block}
    .status-box.ok{background:rgba(0,200,100,.15);border:2px solid rgba(0,200,100,.4);color:#4ade80}
    .status-box.err{background:rgba(200,0,0,.15);border:2px solid rgba(200,0,0,.4);color:#f87171}
    .status-box.info{background:rgba(218,165,32,.1);border:2px solid rgba(218,165,32,.3);color:var(--gold)}
    .launch-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:20px;margin-bottom:30px}
    .tile{background:linear-gradient(135deg,var(--dark-card),rgba(26,14,10,.9));border:2px solid var(--border);border-radius:20px;padding:28px;cursor:pointer;transition:all .3s ease;text-align:left;font-family:inherit;position:relative;overflow:hidden}
    .tile::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,var(--gold),var(--fire-orange));transform:scaleX(0);transition:transform .3s ease}
    .tile:hover::before{transform:scaleX(1)}
    .tile:hover{transform:translateY(-6px);border-color:var(--gold);box-shadow:0 20px 60px rgba(0,0,0,.6),0 0 20px rgba(218,165,32,.2)}
    .tile-header{display:flex;align-items:flex-start;justify-content:space-between;gap:12px;margin-bottom:16px}
    .tile-icon{font-size:40px;filter:drop-shadow(0 4px 8px rgba(226,88,34,.4));animation:iconBounce 2s ease-in-out infinite}
    @keyframes iconBounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-4px)}}
    .badge{font-size:10px;font-weight:900;padding:6px 10px;border-radius:6px;background:var(--gold);color:var(--dark);letter-spacing:.5px;text-transform:uppercase}
    .tile-label{font-family:'Bebas Neue',sans-serif;font-size:24px;letter-spacing:1px;margin-bottom:8px;color:var(--cream)}
    .tile-desc{color:var(--text-muted);font-size:13px;line-height:1.5}
    .help{margin-top:24px;padding:20px;border-radius:16px;background:rgba(0,0,0,.3);border:2px solid var(--border);color:var(--text-muted);font-size:13px;line-height:1.8}
    .help strong{color:var(--gold)}
    .help code{background:rgba(0,0,0,.5);border:1px solid var(--border);padding:4px 8px;border-radius:6px;color:var(--cream);font-family:monospace;font-size:12px;word-break:break-all}
    .connected-badge{display:inline-flex;align-items:center;gap:8px;padding:8px 16px;background:rgba(0,200,100,.15);border:2px solid rgba(0,200,100,.3);border-radius:999px;font-size:12px;font-weight:700;color:#4ade80;margin-left:12px;vertical-align:middle}
    .dot-live{width:8px;height:8px;background:#4ade80;border-radius:50%;animation:pulse 2s ease-in-out infinite}
    @keyframes pulse{0%,100%{opacity:1;box-shadow:0 0 8px #4ade80}50%{opacity:.5}}
    @media(max-width:768px){body{padding:30px 16px 60px}.panel{padding:28px 20px}.form-grid{grid-template-columns:1fr}.actions{flex-direction:column}.btn{width:100%;justify-content:center}}
  </style>
</head>
<body>
  <div class="wrap">
    <div style="margin-bottom:16px;animation:fadeInDown .6s ease-out">
      <a href="index.html" style="display:inline-flex;align-items:center;gap:8px;padding:10px 18px;background:rgba(0,0,0,.5);border:1px solid rgba(218,165,32,.25);border-radius:12px;color:#DAA520;font-size:13px;font-weight:700;text-decoration:none;transition:all .3s;backdrop-filter:blur(10px)">â† Overview</a>
    </div>
    <div class="hero">
      <div class="logo-container">ğŸ¥©</div>
      <h1>Smoke Sessions BBQ</h1>
      <div class="subtitle">Restaurant Management System</div>
      <div class="cajun-accent">âš¡ Pit-Forged Technology âš¡</div>
    </div>

    <div class="panel">
      <div class="section-title">âš™ï¸ System Configuration</div>

      <div class="form-grid">
        <div class="field">
          <label for="appsScriptUrl">ğŸ”— Google Apps Script URL</label>
          <input id="appsScriptUrl" type="text" placeholder="https://script.google.com/.../exec" />
        </div>
        <div class="field">
          <label for="n8nWebhookUrl">ğŸ¤– n8n AI Webhook URL</label>
          <input id="n8nWebhookUrl" type="text" placeholder="https://your-instance.app.n8n.cloud/webhook/..." />
        </div>
      </div>

      <div class="actions">
        <button class="btn primary" id="saveBtn">ğŸ’¾ Save Configuration</button>
        <button class="btn secondary" id="testBtn">ğŸ§ª Test Connection</button>
        <button class="btn ghost" id="clearBtn">ğŸ—‘ï¸ Clear Data</button>
      </div>

      <div id="statusBox" class="status-box"></div>

      <div class="help">
        <strong>ğŸ”¥ Quick API Tests (paste in browser address bar):</strong><br/>
        <code id="testUrl1">[save your Apps Script URL above first]</code><br/>
        <code id="testUrl2">[save your Apps Script URL above first]</code><br/><br/>
        <strong>ğŸ’¡ Tip:</strong> All pages read their URLs from this Control Center. Save once, everything just works.
      </div>
    </div>

    <div class="section-title" style="padding:0 4px;margin-bottom:16px;margin-top:10px">ğŸ”¥ Core System</div>
    <div class="launch-grid">
      <button class="tile" id="guestBtn" type="button">
        <div class="tile-header"><div class="tile-icon">âœ¨</div><div class="badge">Guest</div></div>
        <div class="tile-label">ğŸ“‹ Join Waitlist</div>
        <div class="tile-desc">Guests add themselves to the waitlist from this form</div>
      </button>
      <button class="tile" id="hostBtn" type="button">
        <div class="tile-header"><div class="tile-icon">ğŸ‘¥</div><div class="badge">Host</div></div>
        <div class="tile-label">ğŸ‘€ Manage Waitlist</div>
        <div class="tile-desc">Seat waiting parties and manage the queue</div>
      </button>
      <button class="tile" id="liveBtn" type="button">
        <div class="tile-header"><div class="tile-icon">ğŸ¥©</div><div class="badge">Live</div></div>
        <div class="tile-label">ğŸ”¥ Smoker Status</div>
        <div class="tile-desc">Live meat &amp; smoker availability board</div>
      </button>
      <button class="tile" id="aiBtn" type="button">
        <div class="tile-header"><div class="tile-icon">ğŸ¤–</div><div class="badge">AI</div></div>
        <div class="tile-label">ğŸ’¬ AI Assistant</div>
        <div class="tile-desc">Smart chatbot for customer questions</div>
      </button>
    </div>

    <div class="section-title" style="padding:0 4px;margin-bottom:16px;margin-top:30px">ğŸ“Š Management & Intelligence</div>
    <div class="launch-grid">
      <button class="tile" id="dashboardBtn" type="button">
        <div class="tile-header"><div class="tile-icon">ğŸ“Š</div><div class="badge">Manager</div></div>
        <div class="tile-label">ğŸ§  Manager Dashboard</div>
        <div class="tile-desc">Analytics, sentiment, staff performance & business intel</div>
      </button>
      <button class="tile" id="specialsBtn" type="button">
        <div class="tile-header"><div class="tile-icon">ğŸ”¥</div><div class="badge">Daily</div></div>
        <div class="tile-label">ğŸ½ï¸ Daily Specials</div>
        <div class="tile-desc">Today's deals, hours, and chef's recommendations</div>
      </button>
      <button class="tile" id="shoutoutBtn" type="button">
        <div class="tile-header"><div class="tile-icon">â­</div><div class="badge">Customer</div></div>
        <div class="tile-label">ğŸ‰ Staff Shoutouts</div>
        <div class="tile-desc">Customers compliment servers â€” logs to your dashboard</div>
      </button>
      <button class="tile" id="feedbackBtn" type="button">
        <div class="tile-header"><div class="tile-icon">ğŸ“</div><div class="badge">Private</div></div>
        <div class="tile-label">ğŸ’¬ Customer Feedback</div>
        <div class="tile-desc">Private feedback direct to management â€” not Yelp</div>
      </button>
    </div>

    <div class="section-title" style="padding:0 4px;margin-bottom:16px;margin-top:30px">ğŸ§ª Developer Tools</div>
    <div class="launch-grid">
      <button class="tile" id="testDataBtn" type="button">
        <div class="tile-header"><div class="tile-icon">ğŸ§ª</div><div class="badge">Test</div></div>
        <div class="tile-label">ğŸ“¦ Test Data Loader</div>
        <div class="tile-desc">Send sample waitlist, feedback, shoutouts &amp; chat data to preview all features</div>
      </button>
    </div>
  </div>

<script>
  const $ = id => document.getElementById(id);
  const KEYS = { apps: 'appsScriptUrl', n8n: 'n8nWebhookUrl' };

  function setStatus(msg, type) {
    const box = $('statusBox');
    box.textContent = msg;
    box.className = 'status-box show ' + (type || '');
    if (!msg) box.className = 'status-box';
  }

  function updateTestUrls() {
    const apps = $('appsScriptUrl').value.trim() || '[save your Apps Script URL above first]';
    $('testUrl1').textContent = apps + '?action=getDashboardStats';
    $('testUrl2').textContent = apps + '?action=getSpecials';
  }

  function loadSaved() {
    const apps = localStorage.getItem(KEYS.apps) || '';
    const n8n  = localStorage.getItem(KEYS.n8n)  || '';
    $('appsScriptUrl').value = apps;
    $('n8nWebhookUrl').value = n8n;
    updateTestUrls();
    if (apps || n8n) setStatus('âœ“ Configuration loaded â€” all pages are connected', 'ok');
    else setStatus('ğŸ‘‹ Enter your URLs and click Save to connect everything', 'info');
  }

  function save() {
    const apps = $('appsScriptUrl').value.trim();
    const n8n  = $('n8nWebhookUrl').value.trim();
    if (apps && !apps.startsWith('https://script.google.com/')) {
      setStatus('âš  Apps Script URL should start with https://script.google.com/', 'err');
      return;
    }
    if (apps) localStorage.setItem(KEYS.apps, apps); else localStorage.removeItem(KEYS.apps);
    if (n8n)  localStorage.setItem(KEYS.n8n, n8n);  else localStorage.removeItem(KEYS.n8n);
    setStatus('ğŸ”¥ Saved! All pages are now connected to your Google Sheet and n8n.', 'ok');
    updateTestUrls();
  }

  function clear() {
    if (!confirm('Clear all saved configuration?')) return;
    localStorage.removeItem(KEYS.apps);
    localStorage.removeItem(KEYS.n8n);
    $('appsScriptUrl').value = '';
    $('n8nWebhookUrl').value = '';
    setStatus('Configuration cleared', 'info');
    updateTestUrls();
  }

  // JSONP test â€” no CORS issues
  function test() {
    const apps = $('appsScriptUrl').value.trim();
    if (!apps) { setStatus('âš  Enter your Apps Script URL first', 'err'); return; }
    setStatus('â³ Testing connection via JSONP...', 'info');

    const cb = 'testCb_' + Date.now();
    const s  = document.createElement('script');
    s.src    = apps + '?action=getDashboardStats&callback=' + cb;

    const timer = setTimeout(() => {
      cleanup();
      setStatus('âœ— Timeout â€” check your Apps Script URL and make sure it\'s deployed as "Anyone"', 'err');
    }, 10000);

    window[cb] = (data) => {
      clearTimeout(timer);
      cleanup();
      if (data && data.success) {
        setStatus('ğŸ”¥ Connected! Google Sheets is responding. Everything is working!', 'ok');
      } else {
        setStatus('âœ— Got a response but it returned an error: ' + (data && data.error ? data.error : 'unknown'), 'err');
      }
    };

    function cleanup() {
      delete window[cb];
      if (s.parentNode) s.parentNode.removeChild(s);
    }

    s.onerror = () => { clearTimeout(timer); cleanup(); setStatus('âœ— Script load failed â€” check your URL', 'err'); };
    document.body.appendChild(s);
  }

  $('saveBtn').addEventListener('click', save);
  $('testBtn').addEventListener('click', test);
  $('clearBtn').addEventListener('click', clear);
  $('guestBtn').addEventListener('click',     () => location.href = 'waitlist-guest-form.html');
  $('hostBtn').addEventListener('click',      () => location.href = 'waitlist-host-view.html');
  $('liveBtn').addEventListener('click',      () => location.href = 'live-update-inventory.html');
  $('aiBtn').addEventListener('click',        () => location.href = 'pit-ai-chat.html');
  $('dashboardBtn').addEventListener('click', () => location.href = 'manager-dashboard.html');
  $('specialsBtn').addEventListener('click',  () => location.href = 'daily-specials.html');
  $('shoutoutBtn').addEventListener('click',  () => location.href = 'staff-shoutout.html');
  $('feedbackBtn').addEventListener('click',  () => location.href = 'customer-feedback.html');
  $('testDataBtn').addEventListener('click',  () => location.href = 'test-data.html');
  $('appsScriptUrl').addEventListener('input', updateTestUrls);

  loadSaved();
</script>
</body>
</html>
